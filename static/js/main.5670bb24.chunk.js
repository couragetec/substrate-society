(this["webpackJsonpsubstrate-society"]=this["webpackJsonpsubstrate-society"]||[]).push([[0],{1216:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://kusama-rpc.polkadot.io"}')},1379:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(178),o=a.n(c),l=a(32),u=a(1403),i=a(1392),s=a(1393),m=a(1389),d=a(1404),p=(a(680),a(87)),f=a(44),E=a.n(f),b=a(131),y=a(432),O=a(268),v=a(433),g=a.n(v);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var S=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a(638),{},a(1216),{},["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-society"})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-society"})[t]),e}),{}));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P={socket:S.PROVIDER_SOCKET,types:S.CUSTOM_TYPES,keyring:null,keyringState:null,api:null,apiState:null},x=function(e,t){switch(t.type){case"RESET_SOCKET":return C({},e,{socket:t.payload||e.socket,api:null,apiState:null});case"CONNECT":return C({},e,{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return C({},e,{apiState:"READY"});case"CONNECT_ERROR":return C({},e,{apiState:"ERROR"});case"SET_KEYRING":return C({},e,{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return C({},e,{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},w=r.a.createContext(),R=function(e){var t=C({},P);["socket","types"].forEach((function(a){t[a]="undefined"===typeof e[a]?t[a]:e[a]}));var a=Object(n.useReducer)(x,t),c=Object(l.a)(a,2),o=c[0],u=c[1];return r.a.createElement(w.Provider,{value:[o,u]},e.children)};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(){var e=Object(n.useContext)(w),t=Object(l.a)(e,2),a=t[0],r=t[1],c=a.api,o=a.socket,u=a.types,i=Object(n.useCallback)(Object(b.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return t=new y.WsProvider(o),e.prev=3,e.next=6,y.ApiPromise.create({provider:t,types:u});case 6:return a=e.sent,r({type:"CONNECT",payload:a}),e.next=10,a.isReady;case 10:r({type:"CONNECT_SUCCESS"}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),r({type:"CONNECT_ERROR"});case 17:case"end":return e.stop()}}),e,null,[[3,13]])}))),[c,o,u,r]),s=a.keyringState,m=Object(n.useCallback)(Object(b.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(O.web3Enable)(S.APP_NAME);case 5:return e.next=7,Object(O.web3Accounts)();case 7:t=(t=e.sent).map((function(e){var t=e.address,a=e.meta;return{address:t,meta:N({},a,{name:"".concat(a.name," (").concat(a.source,")")})}})),g.a.loadAll({isDevelopment:S.DEVELOPMENT_KEYRING},t),r({type:"SET_KEYRING",payload:g.a}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),r({type:"KEYRING_ERROR"});case 17:case"end":return e.stop()}}),e,null,[[2,13]])}))),[s,r]);return Object(n.useEffect)((function(){i()}),[i]),Object(n.useEffect)((function(){m()}),[m]),N({},a,{dispatch:r})},T=a(639),D=a.n(T),q=a(640);a.n(q)()(D.a);function M(e){var t=A().api;return window.api=t,window.util=a(8),window.util_crypto=a(53),window.keyring=a(277),null}var I=a(234),_=a(1380);function B(e){var t=e.accountPair,a=void 0===t?null:t,n=e.label,c=e.setStatus,o=e.basic,l=void 0===o?null:o,u=e.primary,i=void 0===u?null:u,s=e.style,m=void 0===s?null:s,d=e.color,p=void 0===d?null:d,f=e.type,y=void 0===f?null:f,v=e.attrs,g=void 0===v?null:v,h=e.disabled,S=void 0!==h&&h,j=A().api,C=g.params,P=void 0===C?null:C,x=g.sudo,w=void 0!==x&&x,R=g.tx,k=void 0===R?null:R,N=function(){return"QUERY"===y},T=function(){var e=Object(b.a)(E.a.mark((function e(){var t,n,r,o,l,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.address,n=a.meta,r=n.source,!n.isInjected){e.next=9;break}return e.next=4,Object(O.web3FromSource)(r);case 4:l=e.sent,o=t,j.setSigner(l.signer),e.next=10;break;case 9:o=a;case 10:c("Sending...");try{u=P?w?k.sudo.apply(k,Object(I.a)(P)):k.apply(void 0,Object(I.a)(P)):w?k.sudo():k()}catch(i){console.error("ERROR forming transaction:",i),c(i.toString())}u&&u.signAndSend(o,(function(e){var t=e.status;t.isFinalized?c("Completed at block hash #".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))})).catch((function(e){c(":( transaction failed"),console.error("ERROR transaction:",e)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.apply(void 0,Object(I.a)(P));case 3:t=e.sent,c(t.toString()),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("ERROR query:",e.t0),c(e.t0.toString());case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(_.a,{primary:i,basic:l,style:m,color:p,type:"submit",onClick:N()?D:T,disabled:S||!k||!N()&&!a},n)}var V=a(1401),z=a(666),Y=a(185),H=a(1399),G=a(270);function F(e){var t=A(),a=t.api,c=t.keyring,o=e.setAccountAddress,u=Object(n.useState)(""),i=Object(l.a)(u,2),s=i[0],d=i[1],p=c.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),f=p.length>0?p[0].value:"";Object(n.useEffect)((function(){d(f),o(f)}),[o,f]);return r.a.createElement(V.a,{attached:"top",tabular:!0,style:{backgroundColor:"#fff",borderColor:"#fff",paddingTop:"1em",paddingBottom:"1em"}},r.a.createElement(m.a,null,r.a.createElement(V.a.Menu,null,r.a.createElement(z.a,{src:"Substrate-Logo.png",size:"mini"})),r.a.createElement(V.a.Menu,{position:"right"},r.a.createElement(Y.a,{name:"users",size:"large",circular:!0,color:s?"green":"red"}),r.a.createElement(H.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select an account",options:p,onChange:function(e,t){var a;a=t.value,o(a),d(a)},value:s}),a.query.balances&&a.query.balances.freeBalance?r.a.createElement(U,{accountSelected:s}):null)))}function U(e){var t=e.accountSelected,a=A().api,c=Object(n.useState)(0),o=Object(l.a)(c,2),u=o[0],i=o[1];return Object(n.useEffect)((function(){var e;return t&&a.query.balances.freeBalance(t,(function(e){i(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t,a.query.balances]),t?r.a.createElement(G.a,{pointing:"left"},r.a.createElement(Y.a,{name:"money bill alternate",color:u>0?"green":"red"}),u):null}var K=a(1400),L=a(1402);function J(e){var t=A().api,a=e.finalized,c=Object(n.useState)(0),o=Object(l.a)(c,2),u=o[0],i=o[1],s=Object(n.useState)(0),m=Object(l.a)(s,2),p=m[0],f=m[1],E=a?t.derive.chain.bestNumberFinalized:t.derive.chain.bestNumber;Object(n.useEffect)((function(){var e=null;return E((function(e){i(e.toNumber()),f(0)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[E]);var b=function(){f((function(e){return e+1}))};return Object(n.useEffect)((function(){var e=setInterval(b,1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement(d.a.Column,null,r.a.createElement(K.a,null,r.a.createElement(K.a.Content,{textAlign:"center"},r.a.createElement(L.a,{label:(a?"Finalized":"Current")+" Block Number",value:u})),r.a.createElement(K.a.Content,{extra:!0},r.a.createElement(Y.a,{name:"time"})," ",p)))}var W=a(1397);function Q(e){var t=A().api,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){var e=['system:ExtrinsicSuccess:: (phase={"ApplyExtrinsic":0})','system:ExtrinsicSuccess:: (phase={"ApplyExtrinsic":1})'];t.query.system.events((function(t){t.forEach((function(t){var a=t.event,n=t.phase,r=a.typeDef,c="".concat(a.section,":").concat(a.method,":: (phase=").concat(n.toString(),")");if(!e.includes(c)){var o=a.data.map((function(e,t){return"".concat(r[t].type,": ").concat(e.toString())}));u((function(e){return[{icon:"bell",date:"X Blocks Ago",summary:"".concat(c,"-").concat(e.length),extraText:a.meta.documentation.join(", ").toString(),content:o.join(", ")}].concat(Object(I.a)(e))}))}}))}))}),[t.query.system]),r.a.createElement(d.a.Column,null,r.a.createElement("h1",null,"Events"),r.a.createElement(W.a,{style:{overflow:"auto",maxHeight:250},events:o}))}var X=a(1395);function Z(e){var t=A().api,a=Object(n.useState)({data:null,version:null}),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(b.a)(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.rpc.state.getMetadata();case 3:a=e.sent,u({data:a,version:a.version}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t.rpc.state]),r.a.createElement(d.a.Column,null,r.a.createElement(K.a,null,r.a.createElement(K.a.Content,null,r.a.createElement(K.a.Header,null,"Metadata"),r.a.createElement(K.a.Meta,null,r.a.createElement("span",null,"v",o.version))),r.a.createElement(K.a.Content,{extra:!0},r.a.createElement(X.a,{trigger:r.a.createElement(_.a,null,"Show Metadata")},r.a.createElement(X.a.Header,null,"Runtime Metadata"),r.a.createElement(X.a.Content,{scrolling:!0},r.a.createElement(X.a.Description,null,r.a.createElement("pre",null,r.a.createElement("code",null,JSON.stringify(o.data,null,2)))))))))}function $(e){var t=A().api,a=Object(n.useState)({}),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(b.a)(E.a.mark((function e(){var a,n,r,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([t.rpc.system.chain(),t.rpc.system.name(),t.rpc.system.version()]);case 3:a=e.sent,n=Object(l.a)(a,3),r=n[0],c=n[1],o=n[2],u({chain:r,nodeName:c,nodeVersion:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[t.rpc.system]),r.a.createElement(d.a.Column,null,r.a.createElement(K.a,null,r.a.createElement(K.a.Content,null,r.a.createElement(K.a.Header,null,o.nodeName),r.a.createElement(K.a.Meta,null,r.a.createElement("span",null,o.chain)),r.a.createElement(K.a.Description,null,"Built using the"," ",r.a.createElement("a",{href:"https://github.com/substrate-developer-hub/substrate-front-end-template"},"Substrate Front End Template"))),r.a.createElement(K.a.Content,{extra:!0},r.a.createElement(Y.a,{name:"setting"}),"v",o.nodeVersion)))}var ee=a(1394),te=a(1391);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){var t=A().api,a=Object(n.useState)(null),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)({value:"",tip:"",who:""}),s=Object(l.a)(i,2),m=s[0],f=s[1],E=e.accountPair,b=e.members,y=e.bids,O=e.candidates;e.suspendedMembers,e.suspendedCandidates;console.log(y);var v=function(e,t){return f((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(p.a)({},t.state,t.value))}))},g=m.value,h=m.tip,S=m.who;return E&&b.includes(E.address)?r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"You are a Member of the Society"),r.a.createElement("h3",null,"Vouch for Others"),r.a.createElement(ee.a,null,r.a.createElement(te.a,{onChange:v,placeholder:"Who",state:"who",type:"text",action:!0}),r.a.createElement(te.a,{onChange:v,placeholder:"Bid Amount",state:"value",type:"text",action:!0}),r.a.createElement(te.a,{onChange:v,placeholder:"Tip Amount",state:"tip",type:"text",action:!0}),r.a.createElement(B,{accountPair:E,label:"Place Vouch",setStatus:u,type:"TRANSACTION",attrs:{params:[S,g,h],tx:t.tx.society.vouch}})),o):E&&y.some((function(e){return e.who.toString()===E.address}))?r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"You are a Bid"),r.a.createElement("h3",null,"Wait for your bid to be accepted or unbid."),r.a.createElement(ee.a,null,r.a.createElement(B,{accountPair:E,label:"Unbid",setStatus:u,type:"TRANSACTION",attrs:{params:[],tx:t.tx.society.unbid}})),o):E&&O.some((function(e){return e.who.toString()===E.address}))?r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"You are a Candidate"),r.a.createElement("h3",null,"Ask members to vote for you!")):r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Join the Society"),r.a.createElement("h3",null,"Make a Bid"),r.a.createElement(ee.a,null,r.a.createElement(te.a,{onChange:v,placeholder:"Bid Amount",state:"value",type:"text",action:!0}),r.a.createElement(B,{accountPair:E,label:"Place Bid",setStatus:u,type:"TRANSACTION",attrs:{params:[g],tx:t.tx.society.bid}})),o)}function re(e){var t=A().api;return t.query.society&&t.query.society.bids?r.a.createElement(ne,e):null}var ce=a(8);function oe(e){var t=e.accountPair,a=A().api,c=Object(n.useState)(0),o=Object(l.a)(c,2),u=o[0],i=o[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),p=m[0],f=m[1],E=Object(ce.stringToU8a)("modlpy/socie".padEnd(32,"\0"));return Object(n.useEffect)((function(){var e=null;return a.query.balances.freeBalance(E,(function(e){i(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[E,a.query.balances]),r.a.createElement(d.a.Column,null,r.a.createElement(K.a,null,r.a.createElement(K.a.Content,{textAlign:"center"},r.a.createElement(L.a,{label:"Society Balance",value:Object(ce.formatBalance)(u)})),r.a.createElement(K.a.Content,{extra:!0},r.a.createElement(B,{accountPair:t,label:"Donate",setStatus:f,type:"TRANSACTION",primary:!0,attrs:{params:[E,"1000000000000000"],tx:a.tx.balances.transfer}}),r.a.createElement("br",null),p)))}function le(e){var t=e.accountPair,a=e.users;return 0!==a.length?a.map((function(e){return r.a.createElement(K.a,{key:e.who.toString(),color:t.address===e.who.toString()?"green":null},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,e.who.toString()),r.a.createElement(K.a.Meta,null,e.kind.isDeposit?"Bid":"Vouch"),r.a.createElement(K.a.Description,null,e.kind.isDeposit?"Deposit Amount: "+e.kind.asDeposit.toString():r.a.createElement(r.a.Fragment,null,"Vouching Member: "+e.kind.asVouch[0].toString(),r.a.createElement("br",null),"Vouching Tip: "+e.kind.asVouch[1].toString()))),r.a.createElement(K.a.Content,{extra:!0},e.value.toString()))})):null}function ue(e){var t=A().api,a=e.accountPair,c=e.bids,o=e.setBids;return Object(n.useEffect)((function(){var e=null;return t.query.society.bids(o).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,o]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Bids"),r.a.createElement(K.a.Group,null,r.a.createElement(le,{users:c,userType:"Bid",accountPair:a})))}function ie(e){var t=A().api;return t.query.society&&t.query.society.bids?r.a.createElement(ue,e):null}var se=a(1398);function me(e){var t=A().api,a=e.accountPair,n=e.setStatus,c=e.users,o=e.votes,l=e.members;return 0!==c.length?c.map((function(e){return r.a.createElement(K.a,{key:e,color:a.address===e.who.toString()?"green":null},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,e.who.toString()),r.a.createElement(K.a.Meta,null,"Friends of Elliot"),r.a.createElement(K.a.Description,null,e.kind.toString(),r.a.createElement("br",null),o.filter((function(t){return t.candidate===e.who})).map((function(e){return"0x02"===e.vote.toString()?r.a.createElement(se.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Approved",trigger:r.a.createElement(Y.a,{circular:!0,color:"green",name:"checkmark"})}):"0x01"===e.vote.toString()?r.a.createElement(se.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Rejected",trigger:r.a.createElement(Y.a,{circular:!0,color:"red",name:"cancel"})}):"0x00"===e.vote.toString()?r.a.createElement(se.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Skeptic",trigger:r.a.createElement(Y.a,{circular:!0,color:"yellow",name:"exclamation"})}):r.a.createElement(se.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Not Voted",trigger:r.a.createElement(Y.a,{circular:!0,color:"grey",name:"question"})})})))),r.a.createElement(K.a.Content,{extra:!0},e.value.toString(),r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:a,label:"Reject",setStatus:n,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[e.who,!1],tx:t.tx.society.vote},disabled:a&&!l.includes(a.address)}),r.a.createElement(B,{accountPair:a,label:"Approve",setStatus:n,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[e.who,!0],tx:t.tx.society.vote},disabled:a&&!l.includes(a.address)}))))})):null}function de(e){var t=A().api,a=Object(n.useState)(null),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)([]),s=Object(l.a)(i,2),m=s[0],p=s[1],f=e.accountPair,E=e.members,b=e.candidates,y=e.setCandidates;return Object(n.useEffect)((function(){var e=null;return t.query.society.candidates(y).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,y]),Object(n.useEffect)((function(){var e=null,a=[],n=!0,r=!1,c=void 0;try{for(var o,l=b[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value,i=!0,s=!1,m=void 0;try{for(var d,f=E[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var y=d.value;a.push([t.query.society.votes,[u.who,y]])}}catch(O){s=!0,m=O}finally{try{i||null==f.return||f.return()}finally{if(s)throw m}}}}catch(O){r=!0,c=O}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return t.queryMulti(a,(function(e){var t=[],a=0,n=!0,r=!1,c=void 0;try{for(var o,l=b[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value,i=!0,s=!1,m=void 0;try{for(var d,f=E[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var y=d.value;t.push({candidate:u.who,member:y,vote:e[a]}),a+=1}}catch(O){s=!0,m=O}finally{try{i||null==f.return||f.return()}finally{if(s)throw m}}}}catch(O){r=!0,c=O}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}p(t)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t,t.query.society,b,E]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Candidates"),r.a.createElement(K.a.Group,null,r.a.createElement(me,{users:b,votes:m,accountPair:f,setStatus:u,members:E})),o)}function pe(e){var t=A().api;return t.query.society&&t.query.society.bids?r.a.createElement(de,e):null}function fe(e){var t=e.defender,a=e.setStatus,n=e.accountPair,c=e.votes,o=e.members,l=A().api;return t?r.a.createElement(K.a,{color:n.address===t.toString()?"green":null},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,t.toString()),r.a.createElement(K.a.Meta,null,"Defender"),r.a.createElement(K.a.Description,null,Object.keys(c).map((function(e){return"0x02"===c[e].toString()?r.a.createElement(se.a,{key:e,content:e,header:"Approved",trigger:r.a.createElement(Y.a,{circular:!0,color:"green",name:"checkmark"})}):"0x01"===c[e].toString()?r.a.createElement(se.a,{key:e,content:e,header:"Rejected",trigger:r.a.createElement(Y.a,{circular:!0,color:"red",name:"cancel"})}):r.a.createElement(se.a,{key:e,content:e,header:"Not Voted",trigger:r.a.createElement(Y.a,{circular:!0,color:"grey",name:"question"})})})))),r.a.createElement(K.a.Content,{extra:!0},r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:n,label:"Reject",setStatus:a,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[!1],tx:l.tx.society.defenderVote},disabled:n&&!o.includes(n.address)}),r.a.createElement(B,{accountPair:n,label:"Approve",setStatus:a,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[!0],tx:l.tx.society.defenderVote},disabled:n&&!o.includes(n.address)})))):null}function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function be(e){var t=A().api,a=Object(n.useState)(null),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),m=s[0],f=s[1],E=Object(n.useState)([]),b=Object(l.a)(E,2),y=b[0],O=b[1],v=e.accountPair,g=e.members;return Object(n.useEffect)((function(){var e=null;return t.query.society.defender(f).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society]),Object(n.useEffect)((function(){var e=null;return t.query.society.defenderVotes.multi(g,(function(e){var t=g.reduce((function(t,a,n){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,Object(p.a)({},a,e[n]))}),{});O(t)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,g]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Defender"),r.a.createElement(K.a.Group,null,r.a.createElement(fe,{defender:m,votes:y,accountPair:v,setStatus:u,members:g})),o)}function ye(e){var t=A().api;return t.query.society&&t.query.society.defender&&t.query.society.defenderVotes?r.a.createElement(be,e):null}function Oe(e){var t=e.users,a=e.strikes;return 0!==t.length?t.map((function(t,n){return r.a.createElement(K.a,{key:t,color:e.accountPair.address===t.toString()?"green":null},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,t.toString()),r.a.createElement(K.a.Meta,null,"Member"),r.a.createElement(K.a.Description,null,"Description")),r.a.createElement(K.a.Content,{extra:!0},"Strikes: "+a[n]))})):null}function ve(e){var t=A().api,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],u=c[1],i=e.accountPair,s=e.members,m=e.setMembers;return Object(n.useEffect)((function(){var e=null;return t.query.society.members(m).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,m]),Object(n.useEffect)((function(){var e=null;return t.query.society.strikes.multi(s,u).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,s,o]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Members"),r.a.createElement(K.a.Group,null,r.a.createElement(Oe,{users:s,strikes:o,accountPair:i})))}function ge(e){var t=A().api;return t.query.society&&t.query.society.members?r.a.createElement(ve,e):null}function he(e){var t=e.founder,a=e.accountPair;return t?r.a.createElement(K.a,{color:a&&a.address===t.toString()?"green":null},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,t.toString()),r.a.createElement(K.a.Meta,null,"Founder"),r.a.createElement(K.a.Description,null,"description")),r.a.createElement(K.a.Content,{extra:!0},"extra")):null}function Se(e){var t=A().api,a=e.accountPair,c=e.founder,o=e.setFounder;return Object(n.useEffect)((function(){var e=null;return t.query.society.founder((function(e){o(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,o]),r.a.createElement(d.a.Column,null,r.a.createElement(he,{founder:c,accountPair:a}))}function je(e){var t=e.head,a=e.accountPair;return t?r.a.createElement(K.a,{color:a&&a.address===t.toString()?"green":null},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,t.toString()),r.a.createElement(K.a.Meta,null,"Head"),r.a.createElement(K.a.Description,null,"description")),r.a.createElement(K.a.Content,{extra:!0},"extra")):null}function Ce(e){var t=A().api,a=e.accountPair,c=e.head,o=e.setHead;return Object(n.useEffect)((function(){var e=null;return t.query.society.head((function(e){o(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,c,o]),r.a.createElement(d.a.Column,null,r.a.createElement(je,{head:c,accountPair:a}))}function Pe(e){var t=A().api,a=Object(n.useState)(0),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){var e=null;return t.query.society.pot((function(e){u(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society]),r.a.createElement(d.a.Column,null,r.a.createElement(K.a,null,r.a.createElement(K.a.Content,{textAlign:"center"},r.a.createElement(L.a,{label:"Society Pot",value:Object(ce.formatBalance)(o)})),r.a.createElement(K.a.Content,{extra:!0},"Extra")))}function xe(e){var t=A().api,a=e.accountPair,n=e.setStatus,c=e.judgementOrigin,o=e.users;return 0!==o.length?o.map((function(e){return r.a.createElement(K.a,{key:e.toString()},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,e.toString()),r.a.createElement(K.a.Meta,null,"Friends of Elliot"),r.a.createElement(K.a.Description,null,"Steve wants to add you to the group ",r.a.createElement("strong",null,"best friends"))),r.a.createElement(K.a.Content,{extra:!0},r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:a,label:"Reject",setStatus:n,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[e,1],tx:t.tx.society.judgeSuspendedCandidate},disabled:a&&a.address!==c}),r.a.createElement(B,{accountPair:a,label:"Rebid",setStatus:n,type:"TRANSACTION",color:"grey",basic:!0,attrs:{params:[e,0],tx:t.tx.society.judgeSuspendedCandidate},disabled:a&&a.address!==c}),r.a.createElement(B,{accountPair:a,label:"Approve",setStatus:n,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[e,2],tx:t.tx.society.judgeSuspendedCandidate},disabled:a&&a.address!==c}))))})):null}function we(e){var t=A(),a=t.api,c=t.keyring,o=Object(n.useState)(null),u=Object(l.a)(o,2),i=u[0],s=u[1],m=e.accountPair,p=e.founder,f=e.suspendedCandidates,E=e.setSuspendedCandidates;return Object(n.useEffect)((function(){var e=c.getPairs().map((function(e){return e.address})),t=null;return a.query.society.suspendedCandidates.multi(e,(function(t){var a=[];for(var n in t)t[n].isSome&&a.push(e[n]);E(a)})).then((function(e){t=e})).catch(console.error),function(){return t&&t()}}),[a.query.society.suspendedCandidates,c,E]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Suspended Candidates"),r.a.createElement(K.a.Group,null,r.a.createElement(xe,{users:f,accountPair:m,setStatus:s,judgementOrigin:p})),i)}function Re(e){var t=A().api;return t.query.society&&t.query.society.suspendedCandidates?r.a.createElement(we,e):null}function ke(e){var t=A().api,a=e.accountPair,n=e.setStatus,c=e.users,o=e.judgementOrigin;return 0!==c.length?c.map((function(e){return r.a.createElement(K.a,{key:e,color:a.address===e.toString()?"green":null},r.a.createElement(K.a.Content,null,r.a.createElement(z.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(K.a.Header,null,e),r.a.createElement(K.a.Meta,null,"Suspended Member"),r.a.createElement(K.a.Description,null,"Steve wants to add you to the group ",r.a.createElement("strong",null,"best friends"))),r.a.createElement(K.a.Content,{extra:!0},r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:a,label:"Kick",setStatus:n,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[e,!1],tx:t.tx.society.judgeSuspendedMember},disabled:a&&a.address!==o}),r.a.createElement(B,{accountPair:a,label:"Forgive",setStatus:n,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[e,!0],tx:t.tx.society.judgeSuspendedMember},disabled:a&&a.address!==o}))))})):null}function Ne(e){var t=A(),a=t.api,c=t.keyring,o=Object(n.useState)(null),u=Object(l.a)(o,2),i=u[0],s=u[1],m=e.accountPair,p=e.founder,f=e.suspendedMembers,E=e.setSuspendedMembers;return Object(n.useEffect)((function(){var e=c.getPairs().map((function(e){return e.address})),t=null;return a.query.society.suspendedMembers.multi(e,(function(t){var a=[];for(var n in t)t[n].isTrue&&a.push(e[n]);E(a)})).then((function(e){t=e})).catch(console.error),function(){return t&&t()}}),[a.query.society.suspendedMembers,c,E]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Suspended Members"),r.a.createElement(K.a.Group,null,r.a.createElement(ke,{users:f,accountPair:m,setStatus:s,judgementOrigin:p})),i)}function Ae(e){var t=A().api;return t.query.society&&t.query.society.suspendedMembers?r.a.createElement(Ne,e):null}function Te(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],o=A(),p=o.apiState,f=o.keyring,E=o.keyringState,b=Object(n.useState)([]),y=Object(l.a)(b,2),O=y[0],v=y[1],g=Object(n.useState)([]),h=Object(l.a)(g,2),S=h[0],j=h[1],C=Object(n.useState)([]),P=Object(l.a)(C,2),x=P[0],w=P[1],R=Object(n.useState)([]),k=Object(l.a)(R,2),N=k[0],T=k[1],D=Object(n.useState)([]),q=Object(l.a)(D,2),I=q[0],_=q[1],B=Object(n.useState)([]),V=Object(l.a)(B,2),z=V[0],Y=V[1],H=Object(n.useState)([]),G=Object(l.a)(H,2),U=G[0],K=G[1],L=a&&"READY"===E&&f.getPair(a),W=function(e){return r.a.createElement(u.a,{active:!0},r.a.createElement(i.a,{size:"small"},e))};if("ERROR"===p)return W("Error connecting to the blockchain");if("READY"!==p)return W("Connecting to the blockchain");if("READY"!==E)return W("Loading accounts (please review any extension's authorization)");var X=Object(n.createRef)();return ce.formatBalance.setDefaults({decimals:12,unit:""}),r.a.createElement("div",{ref:X},r.a.createElement(s.a,{context:X},r.a.createElement(F,{setAccountAddress:c})),r.a.createElement(m.a,null,r.a.createElement(d.a,{stackable:!0,columns:"equal"},r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement($,null),r.a.createElement(Z,null),r.a.createElement(J,null),r.a.createElement(J,{finalized:!0})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement("h1",null,"Society")),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Pe,null),r.a.createElement(oe,{accountPair:L}),r.a.createElement(Se,{accountPair:L,founder:S,setFounder:j}),r.a.createElement(Ce,{accountPair:L,head:O,setHead:v})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(re,{accountPair:L,members:I,candidates:N,suspendedCandidates:z,suspendedMembers:U,bids:x})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(ie,{accountPair:L,bids:x,setBids:w})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(pe,{accountPair:L,members:I,candidates:N,setCandidates:T})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Re,{accountPair:L,suspendedCandidates:z,setSuspendedCandidates:Y,founder:S})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(ge,{accountPair:L,members:I,setMembers:_})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(ye,{accountPair:L,members:I})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Ae,{accountPair:L,suspendedMembers:U,setSuspendedMembers:K,founder:S})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Q,null))),r.a.createElement(M,null)))}o.a.render(r.a.createElement((function(){return r.a.createElement(R,null,r.a.createElement(Te,null))}),null),document.getElementById("root"))},638:function(e){e.exports=JSON.parse('{"APP_NAME":"Society Pallet","DEVELOPMENT_KEYRING":true,"CUSTOM_TYPES":{}}')},675:function(e,t,a){e.exports=a(1379)},704:function(e,t){},746:function(e,t){},748:function(e,t){},779:function(e,t){},844:function(e,t){}},[[675,1,2]]]);
//# sourceMappingURL=main.5670bb24.chunk.js.map