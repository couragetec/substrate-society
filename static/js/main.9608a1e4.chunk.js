(this["webpackJsonpsubstrate-society"]=this["webpackJsonpsubstrate-society"]||[]).push([[0],{1216:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://kusama-rpc.polkadot.io"}')},1379:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(178),o=a.n(c),l=a(28),u=a(1403),i=a(1392),s=a(1393),m=a(1389),d=a(1404),b=(a(680),a(87)),p=a(45),f=a.n(p),E=a(131),y=a(432),h=a(268),g=a(433),v=a.n(g);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var S=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a(638),{},a(1216),{},["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-society"})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-society"})[t]),e}),{}));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P={socket:S.PROVIDER_SOCKET,types:S.CUSTOM_TYPES,keyring:null,keyringState:null,api:null,apiState:null},w=function(e,t){switch(t.type){case"RESET_SOCKET":return C({},e,{socket:t.payload||e.socket,api:null,apiState:null});case"CONNECT":return C({},e,{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return C({},e,{apiState:"READY"});case"CONNECT_ERROR":return C({},e,{apiState:"ERROR"});case"SET_KEYRING":return C({},e,{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return C({},e,{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},k=r.a.createContext(),x=function(e){var t=C({},P);["socket","types"].forEach((function(a){t[a]="undefined"===typeof e[a]?t[a]:e[a]}));var a=Object(n.useReducer)(w,t),c=Object(l.a)(a,2),o=c[0],u=c[1];return r.a.createElement(k.Provider,{value:[o,u]},e.children)};function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(){var e=Object(n.useContext)(k),t=Object(l.a)(e,2),a=t[0],r=t[1],c=a.api,o=a.socket,u=a.types,i=Object(n.useCallback)(Object(E.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return t=new y.WsProvider(o),e.prev=3,e.next=6,y.ApiPromise.create({provider:t,types:u});case 6:return a=e.sent,r({type:"CONNECT",payload:a}),e.next=10,a.isReady;case 10:r({type:"CONNECT_SUCCESS"}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),r({type:"CONNECT_ERROR"});case 17:case"end":return e.stop()}}),e,null,[[3,13]])}))),[c,o,u,r]),s=a.keyringState,m=Object(n.useCallback)(Object(E.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(h.web3Enable)(S.APP_NAME);case 5:return e.next=7,Object(h.web3Accounts)();case 7:t=(t=e.sent).map((function(e){var t=e.address,a=e.meta;return{address:t,meta:N({},a,{name:"".concat(a.name," (").concat(a.source,")")})}})),v.a.loadAll({isDevelopment:S.DEVELOPMENT_KEYRING},t),r({type:"SET_KEYRING",payload:v.a}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0),r({type:"KEYRING_ERROR"});case 17:case"end":return e.stop()}}),e,null,[[2,13]])}))),[s,r]);return Object(n.useEffect)((function(){i()}),[i]),Object(n.useEffect)((function(){m()}),[m]),N({},a,{dispatch:r})},T=a(639),q=a.n(T),D=a(640);a.n(D)()(q.a);function M(e){var t=A().api;return window.api=t,window.util=a(8),window.util_crypto=a(44),window.keyring=a(277),null}var I=a(234),_=a(1380);function B(e){var t=e.accountPair,a=void 0===t?null:t,n=e.label,c=e.setStatus,o=e.basic,l=void 0===o?null:o,u=e.primary,i=void 0===u?null:u,s=e.style,m=void 0===s?null:s,d=e.color,b=void 0===d?null:d,p=e.type,y=void 0===p?null:p,g=e.attrs,v=void 0===g?null:g,O=e.disabled,S=void 0!==O&&O,j=A().api,C=v.params,P=void 0===C?null:C,w=v.sudo,k=void 0!==w&&w,x=v.tx,R=void 0===x?null:x,N=function(){return"QUERY"===y},T=function(){var e=Object(E.a)(f.a.mark((function e(){var t,n,r,o,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.address,n=a.meta,r=n.source,!n.isInjected){e.next=9;break}return e.next=4,Object(h.web3FromSource)(r);case 4:l=e.sent,o=t,j.setSigner(l.signer),e.next=10;break;case 9:o=a;case 10:c("Sending...");try{u=P?k?R.sudo.apply(R,Object(I.a)(P)):R.apply(void 0,Object(I.a)(P)):k?R.sudo():R()}catch(i){console.error("ERROR forming transaction:",i),c(i.toString())}u&&u.signAndSend(o,(function(e){var t=e.status;t.isFinalized?c("Completed at block hash #".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))})).catch((function(e){c(":( transaction failed"),console.error("ERROR transaction:",e)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(E.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.apply(void 0,Object(I.a)(P));case 3:t=e.sent,c(t.toString()),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("ERROR query:",e.t0),c(e.t0.toString());case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(_.a,{primary:i,basic:l,style:m,color:b,type:"submit",onClick:N()?q:T,disabled:S||!R||!N()&&!a},n)}var V=a(1401),K=a(666),H=a(185),z=a(1399),Y=a(270);function F(e){var t=A(),a=t.api,c=t.keyring,o=e.setAccountAddress,u=Object(n.useState)(""),i=Object(l.a)(u,2),s=i[0],d=i[1],b=c.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),p=b.length>0?b[0].value:"";Object(n.useEffect)((function(){d(p),o(p)}),[o,p]);return r.a.createElement(V.a,{attached:"top",tabular:!0,style:{backgroundColor:"#fff",borderColor:"#fff",paddingTop:"1em",paddingBottom:"1em"}},r.a.createElement(m.a,null,r.a.createElement(V.a.Menu,null,r.a.createElement(K.a,{src:"Substrate-Logo.png",size:"mini"})),r.a.createElement(V.a.Menu,{position:"right"},r.a.createElement(H.a,{name:"users",size:"large",circular:!0,color:s?"green":"red"}),r.a.createElement(z.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select an account",options:b,onChange:function(e,t){var a;a=t.value,o(a),d(a)},value:s}),a.query.balances&&a.query.balances.freeBalance?r.a.createElement(G,{accountSelected:s}):null)))}function G(e){var t=e.accountSelected,a=A().api,c=Object(n.useState)(0),o=Object(l.a)(c,2),u=o[0],i=o[1];return Object(n.useEffect)((function(){var e;return t&&a.query.balances.freeBalance(t,(function(e){i(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t,a.query.balances]),t?r.a.createElement(Y.a,{pointing:"left"},r.a.createElement(H.a,{name:"money bill alternate",color:u>0?"green":"red"}),u):null}var U=a(1400),L=a(1402);function J(e){var t=A().api,a=e.finalized,c=e.blockNumber,o=e.setBlockNumber,u=Object(n.useState)(0),i=Object(l.a)(u,2),s=i[0],m=i[1],b=a?t.derive.chain.bestNumberFinalized:t.derive.chain.bestNumber;Object(n.useEffect)((function(){var e=null;return b((function(e){o(e.toNumber()),m(0)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[b,o]);var p=function(){m((function(e){return e+1}))};return Object(n.useEffect)((function(){var e=setInterval(p,1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement(d.a.Column,null,r.a.createElement(U.a,null,r.a.createElement(U.a.Content,{textAlign:"center"},r.a.createElement(L.a,{label:(a?"Finalized":"Current")+" Block Number",value:c})),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement(H.a,{name:"time"})," ",s)))}var W=a(1397);function Q(e){var t=A().api,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){var e=['system:ExtrinsicSuccess:: (phase={"ApplyExtrinsic":0})','system:ExtrinsicSuccess:: (phase={"ApplyExtrinsic":1})'];t.query.system.events((function(t){t.forEach((function(t){var a=t.event,n=t.phase,r=a.typeDef,c="".concat(a.section,":").concat(a.method,":: (phase=").concat(n.toString(),")");if(!e.includes(c)){var o=a.data.map((function(e,t){return"".concat(r[t].type,": ").concat(e.toString())}));u((function(e){return[{icon:"bell",date:"X Blocks Ago",summary:"".concat(c,"-").concat(e.length),extraText:a.meta.documentation.join(", ").toString(),content:o.join(", ")}].concat(Object(I.a)(e))}))}}))}))}),[t.query.system]),r.a.createElement(d.a.Column,null,r.a.createElement("h1",null,"Events"),r.a.createElement(W.a,{style:{overflow:"auto",maxHeight:250},events:o}))}var X=a(1395);function Z(e){var t=A().api,a=Object(n.useState)({data:null,version:null}),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(E.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.rpc.state.getMetadata();case 3:a=e.sent,u({data:a,version:a.version}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t.rpc.state]),r.a.createElement(d.a.Column,null,r.a.createElement(U.a,null,r.a.createElement(U.a.Content,null,r.a.createElement(U.a.Header,null,"Metadata"),r.a.createElement(U.a.Meta,null,r.a.createElement("span",null,"v",o.version))),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement(X.a,{trigger:r.a.createElement(_.a,null,"Show Metadata")},r.a.createElement(X.a.Header,null,"Runtime Metadata"),r.a.createElement(X.a.Content,{scrolling:!0},r.a.createElement(X.a.Description,null,r.a.createElement("pre",null,r.a.createElement("code",null,JSON.stringify(o.data,null,2)))))))))}function $(e){var t=A().api,a=Object(n.useState)({}),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(E.a)(f.a.mark((function e(){var a,n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([t.rpc.system.chain(),t.rpc.system.name(),t.rpc.system.version()]);case 3:a=e.sent,n=Object(l.a)(a,3),r=n[0],c=n[1],o=n[2],u({chain:r,nodeName:c,nodeVersion:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[t.rpc.system]),r.a.createElement(d.a.Column,null,r.a.createElement(U.a,null,r.a.createElement(U.a.Content,null,r.a.createElement(U.a.Header,null,o.nodeName),r.a.createElement(U.a.Meta,null,r.a.createElement("span",null,o.chain)),r.a.createElement(U.a.Description,null,"Built using the"," ",r.a.createElement("a",{href:"https://github.com/substrate-developer-hub/substrate-front-end-template"},"Substrate Front End Template"))),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement(H.a,{name:"setting"}),"v",o.nodeVersion)))}var ee=a(1394),te=a(1391);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){var t=A().api,a=Object(n.useState)(null),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)({value:"",tip:"",who:""}),s=Object(l.a)(i,2),m=s[0],p=s[1],f=e.accountPair,E=e.members,y=e.bids,h=e.candidates,g=(e.suspendedMembers,e.suspendedCandidates,function(e,t){return p((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(b.a)({},t.state,t.value))}))}),v=m.value,O=m.tip,S=m.who;return f&&E.includes(f.address)?r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"You are a Member of the Society"),r.a.createElement("h3",null,"Vouch for Others"),r.a.createElement(ee.a,null,r.a.createElement(te.a,{onChange:g,placeholder:"Who",state:"who",type:"text",action:!0}),r.a.createElement(te.a,{onChange:g,placeholder:"Bid Amount",state:"value",type:"text",action:!0}),r.a.createElement(te.a,{onChange:g,placeholder:"Tip Amount",state:"tip",type:"text",action:!0}),r.a.createElement(B,{accountPair:f,label:"Place Vouch",setStatus:u,type:"TRANSACTION",attrs:{params:[S,v,O],tx:t.tx.society.vouch}})),o):f&&y.some((function(e){return e.who.toString()===f.address}))?r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"You are a Bid"),r.a.createElement("h3",null,"Wait for your bid to be accepted or unbid."),r.a.createElement(ee.a,null,r.a.createElement(B,{accountPair:f,label:"Unbid",setStatus:u,type:"TRANSACTION",attrs:{params:[],tx:t.tx.society.unbid}})),o):f&&h.some((function(e){return e.who.toString()===f.address}))?r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"You are a Candidate"),r.a.createElement("h3",null,"Ask members to vote for you!")):r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Join the Society"),r.a.createElement("h3",null,"Make a Bid"),r.a.createElement(ee.a,null,r.a.createElement(te.a,{onChange:g,placeholder:"Bid Amount",state:"value",type:"text",action:!0}),r.a.createElement(B,{accountPair:f,label:"Place Bid",setStatus:u,type:"TRANSACTION",attrs:{params:[v],tx:t.tx.society.bid}})),o)}function re(e){var t=A().api;return t.query.society&&t.query.society.bids?r.a.createElement(ne,e):null}var ce=a(8),oe=a(44);function le(e){var t=e.accountPair,a=A().api,c=Object(n.useState)(0),o=Object(l.a)(c,2),u=o[0],i=o[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),b=m[0],p=m[1],f=Object(ce.stringToU8a)("modlpy/socie".padEnd(32,"\0"));return Object(n.useEffect)((function(){var e=null;return a.query.balances.freeBalance(f,(function(e){i(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[f,a.query.balances]),r.a.createElement(d.a.Column,null,r.a.createElement(U.a,null,r.a.createElement(U.a.Content,{textAlign:"center"},r.a.createElement(L.a,{label:"Society Balance",value:Object(ce.formatBalance)(u)})),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement(B,{accountPair:t,label:"Donate",setStatus:p,type:"TRANSACTION",primary:!0,attrs:{params:[f,"1000000000000000"],tx:a.tx.balances.transfer}}),r.a.createElement(_.a,{secondary:!0,content:"View Account",target:"_blank",href:"https://polkascan.io/pre/kusama-cc3/account/"+Object(oe.encodeAddress)(f)}),r.a.createElement("br",null),b)))}function ue(e){var t=e.accountPair,a=e.users;return 0!==a.length?a.map((function(e){return r.a.createElement(U.a,{key:e.who.toString(),color:t.address===e.who.toString()?"green":null},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,e.who.toString()),r.a.createElement(U.a.Meta,null,e.kind.isDeposit?"Bid":"Vouch"),r.a.createElement(U.a.Description,null,e.kind.isDeposit?"Deposit Amount: "+e.kind.asDeposit.toString():r.a.createElement(r.a.Fragment,null,"Vouching Member: "+e.kind.asVouch[0].toString(),r.a.createElement("br",null),"Vouching Tip: "+e.kind.asVouch[1].toString()))),r.a.createElement(U.a.Content,{extra:!0},e.value.toString()))})):null}function ie(e){var t=e.enabled,a=void 0===t||t,n=e.period,c=e.blockNumber,o=e.name;return a?r.a.createElement(U.a,null,r.a.createElement(U.a.Content,{textAlign:"center"},r.a.createElement(L.a,{label:"Blocks Left",value:n-c%n})),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement(H.a,{name:"time"})," ",o," every ",n," blocks.")):null}function se(e){var t=A().api,a=e.accountPair,c=e.bids,o=e.setBids,l=e.blockNumber,u=t.consts.society.rotationPeriod.toNumber();return Object(n.useEffect)((function(){var e=null;return t.query.society.bids(o).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,o]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Bids"),r.a.createElement(U.a.Group,null,r.a.createElement(ie,{enabled:c.length>0,period:u,blockNumber:l,name:"Bid rotation"}),r.a.createElement(ue,{users:c,userType:"Bid",accountPair:a})))}function me(e){var t=A().api;return t.query.society&&t.query.society.bids?r.a.createElement(se,e):null}var de=a(1398);function be(e){var t=A().api,a=e.accountPair,n=e.setStatus,c=e.users,o=e.votes,l=e.members;return 0!==c.length?c.map((function(e){return r.a.createElement(U.a,{key:e,color:a.address===e.who.toString()?"green":null},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,e.who.toString()),r.a.createElement(U.a.Meta,null,"Friends of Elliot"),r.a.createElement(U.a.Description,null,e.kind.toString(),r.a.createElement("br",null),o.filter((function(t){return t.candidate===e.who})).map((function(e){return"0x02"===e.vote.toString()?r.a.createElement(de.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Approved",trigger:r.a.createElement(H.a,{circular:!0,color:"green",name:"checkmark"})}):"0x01"===e.vote.toString()?r.a.createElement(de.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Rejected",trigger:r.a.createElement(H.a,{circular:!0,color:"red",name:"cancel"})}):"0x00"===e.vote.toString()?r.a.createElement(de.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Skeptic",trigger:r.a.createElement(H.a,{circular:!0,color:"yellow",name:"exclamation"})}):r.a.createElement(de.a,{key:e.candidate+e.member,content:e.member.toString(),header:"Not Voted",trigger:r.a.createElement(H.a,{circular:!0,color:"grey",name:"question"})})})))),r.a.createElement(U.a.Content,{extra:!0},e.value.toString(),r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:a,label:"Reject",setStatus:n,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[e.who,!1],tx:t.tx.society.vote},disabled:a&&!l.includes(a.address)}),r.a.createElement(B,{accountPair:a,label:"Approve",setStatus:n,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[e.who,!0],tx:t.tx.society.vote},disabled:a&&!l.includes(a.address)}))))})):null}function pe(e){var t=A().api,a=Object(n.useState)(null),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)([]),s=Object(l.a)(i,2),m=s[0],b=s[1],p=e.accountPair,f=e.members,E=e.candidates,y=e.setCandidates,h=e.blockNumber,g=t.consts.society.rotationPeriod.toNumber();return Object(n.useEffect)((function(){var e=null;return t.query.society.candidates(y).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,y]),Object(n.useEffect)((function(){var e=null,a=[],n=!0,r=!1,c=void 0;try{for(var o,l=E[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value,i=!0,s=!1,m=void 0;try{for(var d,p=f[Symbol.iterator]();!(i=(d=p.next()).done);i=!0){var y=d.value;a.push([t.query.society.votes,[u.who,y]])}}catch(h){s=!0,m=h}finally{try{i||null==p.return||p.return()}finally{if(s)throw m}}}}catch(h){r=!0,c=h}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return t.queryMulti(a,(function(e){var t=[],a=0,n=!0,r=!1,c=void 0;try{for(var o,l=E[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value,i=!0,s=!1,m=void 0;try{for(var d,p=f[Symbol.iterator]();!(i=(d=p.next()).done);i=!0){var y=d.value;t.push({candidate:u.who,member:y,vote:e[a]}),a+=1}}catch(h){s=!0,m=h}finally{try{i||null==p.return||p.return()}finally{if(s)throw m}}}}catch(h){r=!0,c=h}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}b(t)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t,t.query.society,E,f]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Candidates"),r.a.createElement(U.a.Group,null,r.a.createElement(ie,{enabled:E.length>0,period:g,blockNumber:h,name:"Candidate rotation"}),r.a.createElement(be,{users:E,votes:m,accountPair:p,setStatus:u,members:f})),o)}function fe(e){var t=A().api;return t.query.society&&t.query.society.bids?r.a.createElement(pe,e):null}function Ee(e){var t=e.defender,a=e.setStatus,n=e.accountPair,c=e.votes,o=e.members,l=A().api;return t?r.a.createElement(U.a,{color:n.address===t.toString()?"green":null},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,t.toString()),r.a.createElement(U.a.Meta,null,"Defender"),r.a.createElement(U.a.Description,null,Object.keys(c).map((function(e){return"0x02"===c[e].toString()?r.a.createElement(de.a,{key:e,content:e,header:"Approved",trigger:r.a.createElement(H.a,{circular:!0,color:"green",name:"checkmark"})}):"0x01"===c[e].toString()?r.a.createElement(de.a,{key:e,content:e,header:"Rejected",trigger:r.a.createElement(H.a,{circular:!0,color:"red",name:"cancel"})}):r.a.createElement(de.a,{key:e,content:e,header:"Not Voted",trigger:r.a.createElement(H.a,{circular:!0,color:"grey",name:"question"})})})))),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:n,label:"Reject",setStatus:a,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[!1],tx:l.tx.society.defenderVote},disabled:n&&!o.includes(n.address)}),r.a.createElement(B,{accountPair:n,label:"Approve",setStatus:a,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[!0],tx:l.tx.society.defenderVote},disabled:n&&!o.includes(n.address)})))):null}function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function he(e){var t=A().api,a=Object(n.useState)(null),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),m=s[0],p=s[1],f=Object(n.useState)([]),E=Object(l.a)(f,2),y=E[0],h=E[1],g=e.accountPair,v=e.members,O=e.blockNumber,S=t.consts.society.challengePeriod.toNumber();return Object(n.useEffect)((function(){var e=null;return t.query.society.defender(p).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society]),Object(n.useEffect)((function(){var e=null;return t.query.society.defenderVotes.multi(v,(function(e){var t=v.reduce((function(t,a,n){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,Object(b.a)({},a,e[n]))}),{});h(t)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,v]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Defender"),r.a.createElement(U.a.Group,null,r.a.createElement(ie,{enabled:!0,period:S,blockNumber:O,name:"Challenge period"}),r.a.createElement(Ee,{defender:m,votes:y,accountPair:g,setStatus:u,members:v})),o)}function ge(e){var t=A().api;return t.query.society&&t.query.society.defender&&t.query.society.defenderVotes?r.a.createElement(he,e):null}function ve(e){var t=e.users,a=e.strikes;return 0!==t.length?t.map((function(t,n){return r.a.createElement(U.a,{key:t,color:e.accountPair.address===t.toString()?"green":null},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,t.toString()),r.a.createElement(U.a.Meta,null,"Member"),r.a.createElement(U.a.Description,null,"Description")),r.a.createElement(U.a.Content,{extra:!0},"Strikes: "+a[n]))})):null}function Oe(e){var t=A().api,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],u=c[1],i=e.accountPair,s=e.members,m=e.setMembers;return Object(n.useEffect)((function(){var e=null;return t.query.society.members(m).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,m]),Object(n.useEffect)((function(){var e=null;return t.query.society.strikes.multi(s,u).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,s,o]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Members"),r.a.createElement(U.a.Group,null,r.a.createElement(ve,{users:s,strikes:o,accountPair:i})))}function Se(e){var t=A().api;return t.query.society&&t.query.society.members?r.a.createElement(Oe,e):null}function je(e){var t=e.founder,a=e.accountPair;return t?r.a.createElement(U.a,{color:a&&a.address===t.toString()?"green":null},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,t.toString()),r.a.createElement(U.a.Meta,null,"Founder"),r.a.createElement(U.a.Description,null,"description")),r.a.createElement(U.a.Content,{extra:!0},"extra")):null}function Ce(e){var t=A().api,a=e.accountPair,c=e.founder,o=e.setFounder;return Object(n.useEffect)((function(){var e=null;return t.query.society.founder((function(e){o(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,o]),r.a.createElement(d.a.Column,null,r.a.createElement(je,{founder:c,accountPair:a}))}function Pe(e){var t=e.head,a=e.accountPair;return t?r.a.createElement(U.a,{color:a&&a.address===t.toString()?"green":null},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,t.toString()),r.a.createElement(U.a.Meta,null,"Head"),r.a.createElement(U.a.Description,null,"description")),r.a.createElement(U.a.Content,{extra:!0},"extra")):null}function we(e){var t=A().api,a=e.accountPair,c=e.head,o=e.setHead;return Object(n.useEffect)((function(){var e=null;return t.query.society.head((function(e){o(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society,c,o]),r.a.createElement(d.a.Column,null,r.a.createElement(Pe,{head:c,accountPair:a}))}function ke(e){var t=A().api,a=Object(n.useState)(0),c=Object(l.a)(a,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){var e=null;return t.query.society.pot((function(e){u(e.toString())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society]),r.a.createElement(d.a.Column,null,r.a.createElement(U.a,null,r.a.createElement(U.a.Content,{textAlign:"center"},r.a.createElement(L.a,{label:"Society Pot",value:Object(ce.formatBalance)(o)})),r.a.createElement(U.a.Content,{extra:!0},"Extra")))}function xe(e){var t=A().api,a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],u=c[1];Object(n.useEffect)((function(){var e=null;return t.query.society.rules(u).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[t.query.society]);var i="0x948d3a4378914341dc7af9220a4c73acb2b3f72a70f14ee8089799da16d94c17",s="# Kappa Sigma Mu (K\u03a3M): The Kusama Fratority #### Or, _Kusama Human Blockchain Project_ ## Preamble Kappa Sigma Mu is a membership club using the the Substrate _Society_ pallet. Society pallet defines most of the process behind becoming a member, however it leaves undefined the specific qualities by which members should be judging member-candidates and challenged-members. This is what is refered to by the `rules` that are passed into the `found` transaction. ## `rules`: Convention of Approval of Membership New candidate members shall be judged on their ability to provide *Proof-of-Ink* to existing members, where the *Ink* shall be a **permanent tattoo** including at least two elements: 1. **An identifier of the Kusama network.** One or more of: the Kusama network's canary symbol; the typography; the full logo; or the Kusama genesis hash. Designs may be filled and in outline. The hash must be rendered in full as a barcode, binary or in hex. An artistic derivative of one or more of these is also acceptable, but may not deviate from the style, design or content sufficently that it be no longer obviously identifiable as Kusama. 2. **An identifier of the parent member.** The parent member, as defined by the society pallet instance's `Head` storage item at the time of candidacy. This should be rendered as one of: an SS58 account or index address; decimal accout index; binary account ID; or a machine-readable image capable of being recognised by a mainstream Kusama wallet. The proof should contain compelling evidence that the tattoo: - exists on the body; - could fit into a circle no smaller than 2.54cm; and - is permanent. In proving each of these, we recommend: - at least two high-quality well-lit photographs; - a video of it being done where the equipment is visible is better; - live witnessing by other members is best, together with pre-publication of the location and time that the tattooing takes place to allow other members to gather and witness. The identity of the member need *not* be discernable nor the specific part of the body on which it is placed. ### Founder Exactly as per the standard convention, but there is no need for the second, \"identifier of the parent member\" since there is no parent member to identify. ### Existing Members (Challenges) Evidence of the continued existence of the tattoo should be provided; high-resolution photographic evidence in good light from a variety of angles and with proof that it was taken after the challenge as announced, such as a recent kusama block hash in frame.";return r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"The Rules of Society"),r.a.createElement("p",null,"Transaction"," ",r.a.createElement("a",{href:"https://polkascan.io/pre/kusama-cc3/transaction/"+i},i)),r.a.createElement(X.a,{trigger:r.a.createElement(_.a,null,"Show Rules")},r.a.createElement(X.a.Header,null,"Society Rules"),r.a.createElement(X.a.Content,{scrolling:!0},r.a.createElement(X.a.Description,null,r.a.createElement("pre",null,r.a.createElement("code",null,"Rules Hash: ",o.toString()),r.a.createElement("br",null),r.a.createElement("code",null,"Text Hash: "," ",Object(oe.blake2AsHex)(s))),r.a.createElement("p",null,s)))))}function Re(e){var t=A().api;return t.query.society&&t.query.society.rules?r.a.createElement(xe,e):null}function Ne(e){var t=A().api,a=e.accountPair,n=e.setStatus,c=e.judgementOrigin,o=e.users;return 0!==o.length?o.map((function(e){return r.a.createElement(U.a,{key:e.toString()},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,e.toString()),r.a.createElement(U.a.Meta,null,"Friends of Elliot"),r.a.createElement(U.a.Description,null,"Steve wants to add you to the group ",r.a.createElement("strong",null,"best friends"))),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:a,label:"Reject",setStatus:n,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[e,1],tx:t.tx.society.judgeSuspendedCandidate},disabled:a&&a.address!==c}),r.a.createElement(B,{accountPair:a,label:"Rebid",setStatus:n,type:"TRANSACTION",color:"grey",basic:!0,attrs:{params:[e,0],tx:t.tx.society.judgeSuspendedCandidate},disabled:a&&a.address!==c}),r.a.createElement(B,{accountPair:a,label:"Approve",setStatus:n,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[e,2],tx:t.tx.society.judgeSuspendedCandidate},disabled:a&&a.address!==c}))))})):null}function Ae(e){var t=A(),a=t.api,c=t.keyring,o=Object(n.useState)(null),u=Object(l.a)(o,2),i=u[0],s=u[1],m=e.accountPair,b=e.founder,p=e.suspendedCandidates,f=e.setSuspendedCandidates;return Object(n.useEffect)((function(){var e=c.getPairs().map((function(e){return e.address})),t=null;return a.query.society.suspendedCandidates.multi(e,(function(t){var a=[];for(var n in t)t[n].isSome&&a.push(e[n]);f(a)})).then((function(e){t=e})).catch(console.error),function(){return t&&t()}}),[a.query.society.suspendedCandidates,c,f]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Suspended Candidates"),r.a.createElement(U.a.Group,null,r.a.createElement(Ne,{users:p,accountPair:m,setStatus:s,judgementOrigin:b})),i)}function Te(e){var t=A().api;return t.query.society&&t.query.society.suspendedCandidates?r.a.createElement(Ae,e):null}function qe(e){var t=A().api,a=e.accountPair,n=e.setStatus,c=e.users,o=e.judgementOrigin;return 0!==c.length?c.map((function(e){return r.a.createElement(U.a,{key:e,color:a.address===e.toString()?"green":null},r.a.createElement(U.a.Content,null,r.a.createElement(K.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(U.a.Header,null,e),r.a.createElement(U.a.Meta,null,"Suspended Member"),r.a.createElement(U.a.Description,null,"Steve wants to add you to the group ",r.a.createElement("strong",null,"best friends"))),r.a.createElement(U.a.Content,{extra:!0},r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(B,{accountPair:a,label:"Kick",setStatus:n,type:"TRANSACTION",color:"red",basic:!0,attrs:{params:[e,!1],tx:t.tx.society.judgeSuspendedMember},disabled:a&&a.address!==o}),r.a.createElement(B,{accountPair:a,label:"Forgive",setStatus:n,type:"TRANSACTION",color:"green",basic:!0,attrs:{params:[e,!0],tx:t.tx.society.judgeSuspendedMember},disabled:a&&a.address!==o}))))})):null}function De(e){var t=A(),a=t.api,c=t.keyring,o=Object(n.useState)(null),u=Object(l.a)(o,2),i=u[0],s=u[1],m=e.accountPair,b=e.founder,p=e.suspendedMembers,f=e.setSuspendedMembers;return Object(n.useEffect)((function(){var e=c.getPairs().map((function(e){return e.address})),t=null;return a.query.society.suspendedMembers.multi(e,(function(t){var a=[];for(var n in t)t[n].isTrue&&a.push(e[n]);f(a)})).then((function(e){t=e})).catch(console.error),function(){return t&&t()}}),[a.query.society.suspendedMembers,c,f]),r.a.createElement(d.a.Column,null,r.a.createElement("h2",null,"Suspended Members"),r.a.createElement(U.a.Group,null,r.a.createElement(qe,{users:p,accountPair:m,setStatus:s,judgementOrigin:b})),i)}function Me(e){var t=A().api;return t.query.society&&t.query.society.suspendedMembers?r.a.createElement(De,e):null}function Ie(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],o=A(),b=o.apiState,p=o.keyring,f=o.keyringState,E=Object(n.useState)([]),y=Object(l.a)(E,2),h=y[0],g=y[1],v=Object(n.useState)([]),O=Object(l.a)(v,2),S=O[0],j=O[1],C=Object(n.useState)([]),P=Object(l.a)(C,2),w=P[0],k=P[1],x=Object(n.useState)([]),R=Object(l.a)(x,2),N=R[0],T=R[1],q=Object(n.useState)([]),D=Object(l.a)(q,2),I=D[0],_=D[1],B=Object(n.useState)([]),V=Object(l.a)(B,2),K=V[0],H=V[1],z=Object(n.useState)([]),Y=Object(l.a)(z,2),G=Y[0],U=Y[1],L=Object(n.useState)(0),W=Object(l.a)(L,2),X=W[0],ee=W[1],te=Object(n.useState)(0),ae=Object(l.a)(te,2),ne=ae[0],oe=ae[1],ue=a&&"READY"===f&&p.getPair(a),ie=function(e){return r.a.createElement(u.a,{active:!0},r.a.createElement(i.a,{size:"small"},e))};if("ERROR"===b)return ie("Error connecting to the blockchain");if("READY"!==b)return ie("Connecting to the blockchain");if("READY"!==f)return ie("Loading accounts (please review any extension's authorization)");var se=Object(n.createRef)();return ce.formatBalance.setDefaults({decimals:12,unit:""}),r.a.createElement("div",{ref:se},r.a.createElement(s.a,{context:se},r.a.createElement(F,{setAccountAddress:c})),r.a.createElement(m.a,null,r.a.createElement(d.a,{stackable:!0,columns:"equal"},r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement($,null),r.a.createElement(Z,null),r.a.createElement(J,{blockNumber:X,setBlockNumber:ee}),r.a.createElement(J,{blockNumber:ne,setBlockNumber:oe,finalized:!0})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement("h1",null,"Society")),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Re,null)),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(ke,null),r.a.createElement(le,{accountPair:ue}),r.a.createElement(Ce,{accountPair:ue,founder:S,setFounder:j}),r.a.createElement(we,{accountPair:ue,head:h,setHead:g})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(re,{accountPair:ue,members:I,candidates:N,suspendedCandidates:K,suspendedMembers:G,bids:w})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(me,{accountPair:ue,bids:w,setBids:k,blockNumber:X})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(fe,{accountPair:ue,members:I,candidates:N,setCandidates:T,blockNumber:X})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Te,{accountPair:ue,suspendedCandidates:K,setSuspendedCandidates:H,founder:S})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Se,{accountPair:ue,members:I,setMembers:_})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(ge,{accountPair:ue,members:I,blockNumber:X})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Me,{accountPair:ue,suspendedMembers:G,setSuspendedMembers:U,founder:S})),r.a.createElement(d.a.Row,{stretched:!0},r.a.createElement(Q,null))),r.a.createElement(M,null)))}o.a.render(r.a.createElement((function(){return r.a.createElement(x,null,r.a.createElement(Ie,null))}),null),document.getElementById("root"))},638:function(e){e.exports=JSON.parse('{"APP_NAME":"Society Pallet","DEVELOPMENT_KEYRING":true,"CUSTOM_TYPES":{}}')},675:function(e,t,a){e.exports=a(1379)},704:function(e,t){},746:function(e,t){},748:function(e,t){},779:function(e,t){},844:function(e,t){}},[[675,1,2]]]);
//# sourceMappingURL=main.9608a1e4.chunk.js.map